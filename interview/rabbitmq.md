# rabbitmq
* rabbitmq server 维护了一条从producer 到consuemr 的路线保证数据传输
* exchange : producer 将数据发送给交换器,交换器通过指定的规则发送给队列
    * direct(routing_key匹配),routing_key绑定了队列,exchange收到消息后,exchange会根据生成者routing_key绑定的不同情况将消息发送到不同的队列中,供消费者使用。实现消息路由。
    * topic(模式匹配):和direct 不同的是,可以使用通配符绑定:\*(批量一个) \#(匹配多个)。exchange收到消息后安装通配符规则放到队列中。
    * fanout(广播),指定了交换器和队列一一绑定,和routing_key没关系，数据发送到指定的交换器。指定的队列处理
* ack:默认情况下,ack关闭，开启ack后,只有消费者处理完成消息后,队列才会删除任务，保证任务不丢失,如果忘记发送ack, 会不断有消息被消费。

## RPC 
* 远程过程调用。A服务器需要调用B服务器的函数,方法,就需要使用RPC
* 客户端发送一个远程调用请求(请求的时候,会在请求头上带上一个唯一的标识，和一个回调队列名字)
* __回调队列__: 该队列会在客户端生成(可以是一个临时队列),并绑定好了consumer,有相应的结果处理函数
* 服务器的rpc_queue队列收到消息后,开始处理。处理完成后，把消息发回给routing_key=call_name的回调队列,回调队列收到消息后开始处理，处理前核对下ID是否和发送的一致。防止处理了别人的消息。


