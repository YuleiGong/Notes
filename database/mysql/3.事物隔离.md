# 事物隔离

* 事务就是要保证一组数据库操作，要么全部成功，要么全部失败。在 MySQL 中，事务支持是在引擎层实现的

## 隔离性与隔离级别

* 当数据库上有多个事务同时执行的时候，就可能出现:
  * 脏读（dirty read）:读取未提交的数据。A事务读取B事务尚未提交的数据，此时如果B事务发生错误并执行回滚操作，那么A事务读取到的数据就是脏数据，因为B事物已经回滚了，A事物确什么都不知道。
  * 不可重复读（non-repeatable read）:  前后多次读取，数据内容不一致。 事务A在执行读取操作，由整个事务A比较大，前后读取同一条数据需要经历很长的时间 。而在事务A第一次读取数据，比如此时读取了小明的年龄为20岁，事务B执行更改操作，将小明的年龄更改为30岁，此时事务A第二次读取到小明的年龄时，发现其年龄是30岁，和之前的数据不一样了，也就是数据不重复了，系统不可以读取到重复的数据，称为不可重复读。
  ![不可重复读.png](https://i.loli.net/2021/04/14/fWXknrjv4lgCVM7.png)
  * 幻读（phantom read):前后多次读取，数据总量不一致。事务A在执行读取操作，需要两次统计数据的总量，前一次查询数据总量后，此时事务B执行了新增数据的操作并提交后，这个时候事务A读取的数据总量和之前统计的不一样，就像产生了幻觉一样，平白无故的多了几条数据，成为幻读。
  ![幻读.png](https://i.loli.net/2021/04/14/MQoSJ6tgRNr1Vad.png)

***为了解决这些问题，就有了“隔离级别”的概念***

* SQL 标准的事务隔离级别包括：
  * 读未提交（read uncommitted）: 
  * 读提交（read committed）
  * 可重复读（repeatable read）
  * 串行化（serializable）

